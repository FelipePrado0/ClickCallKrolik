# Configuração do Servidor de Webhook
# Copie este arquivo para .env e ajuste os valores conforme necessário

# Porta do servidor de webhook
PORT=3000

# URL do frontend (para CORS e referência)
FRONTEND_URL=http://localhost:5500

# URL do webhook n8n (para encaminhar gravações)
N8N_WEBHOOK_URL=https://n8n-k-production.up.railway.app/webhook/d7070f2c-fffd-4ba1-b567-a10a1c9661d9

# Configuração de Logs
LOG_LEVEL=info

# Configuração de Timeout (em milissegundos)
WEBHOOK_TIMEOUT=5000

# Configuração de Polling do Frontend (intervalo em milissegundos)
FRONTEND_POLLING_INTERVAL=5000

# ==========================================
# Segurança e Validação
# ==========================================

# Whitelist de IPs permitidos (separados por vírgula). Vazio = permite todos
# Exemplo: WHITELIST_IPS=192.168.1.1,10.0.0.1,172.16.0.1
WHITELIST_IPS=

# Tamanho máximo do body em bytes (padrão: 100KB = 100000)
MAX_BODY_SIZE=100000

# Rate Limiting: janela de tempo em milissegundos (padrão: 60000 = 1 minuto)
RATE_LIMIT_WINDOW=60000

# Rate Limiting: máximo de requisições por janela (padrão: 100)
RATE_LIMIT_MAX_REQUESTS=100

# ==========================================
# Retry e Resiliência
# ==========================================

# Máximo de tentativas ao encaminhar para n8n (padrão: 3)
N8N_RETRY_MAX_ATTEMPTS=3

# Tempo base de backoff em milissegundos (padrão: 1000 = 1 segundo)
# Backoff exponencial: tentativa 1 = 1s, tentativa 2 = 2s, tentativa 3 = 4s
N8N_RETRY_BACKOFF_BASE=1000

# ==========================================
# Auditoria e Observabilidade
# ==========================================

# Máximo de eventos de auditoria a manter em memória (padrão: 100)
MAX_AUDIT_EVENTS=100
